commit bf183e7b510b80883d629fec6c3d743688b3e4a8
Author: Stéphane Graber <stgraber@ubuntu.com>
Date:   Thu Jun 29 13:00:41 2017 -0400

    cancel: Fix crash if no canceler is setup
    
    Signed-off-by: Stéphane Graber <stgraber@ubuntu.com>

diff --git a/shared/cancel/canceler.go b/shared/cancel/canceler.go
index 7e86851..79f60db 100644
--- a/shared/cancel/canceler.go
+++ b/shared/cancel/canceler.go
@@ -34,7 +34,7 @@ func CancelableDownload(c *Canceler, client *http.Client, req *http.Request) (*h
 		}
 
 		select {
-		case <-c.chCancel:
+		case <-chCancel:
 			if transport, ok := client.Transport.(*http.Transport); ok {
 				transport.CancelRequest(req)
 			}
